{"version":3,"sources":["api/users.js","api/categories.js","components/ProductList/ProductList.jsx","components/UserFilter/UserFilter.jsx","components/QueryFilter/QueryFilter.jsx","components/CategoryFilter/CategoryFilter.jsx","App.jsx","api/products.js","index.jsx"],"names":["id","name","sex","title","icon","ownerId","columns","SORT_ASC","SORT_DESC","ProductList","products","useState","sortType","setSortType","sortOrder","setSortOrder","sortedProducts","sort","a","b","dif","localeCompare","category","user","className","map","href","onClick","handleSelectSort","classNames","UserFilter","users","selectedUserId","setSelectedUserId","QueryFilter","query","setQuery","type","placeholder","value","onChange","event","target","CategoryFilter","categories","selectedCategories","setSelectedCategories","length","includes","index","indexOf","slice","handleCategoryToggle","defaultProducts","categoryId","product","copy","categoriesFromServer","find","usersFromServer","App","filteredProducts","useMemo","filter","userIdFilter","selectedCategoriesFilter","cleanQuery","trim","toLowerCase","queryFilter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.56a65817.chunk.js","sourcesContent":["export default [\n  { id: 1, name: 'Roma', sex: 'm' },\n  { id: 2, name: 'Anna', sex: 'f' },\n  { id: 3, name: 'Max', sex: 'm' },\n  { id: 4, name: 'John', sex: 'm' },\n];\n","export default [\n  {\n    id: 1,\n    title: 'Grocery',\n    icon: '🍞',\n    ownerId: 2,\n  },\n  {\n    id: 2,\n    title: 'Drinks',\n    icon: '🍺',\n    ownerId: 1,\n  },\n  {\n    id: 3,\n    title: 'Fruits',\n    icon: '🍏',\n    ownerId: 2,\n  },\n  {\n    id: 4,\n    title: 'Electronics',\n    icon: '💻',\n    ownerId: 1,\n  },\n  {\n    id: 5,\n    title: 'Clothes',\n    icon: '👚',\n    ownerId: 3,\n  },\n];\n","import classNames from 'classnames';\nimport React, { useState } from 'react';\n\nconst columns = [\n  {\n    id: 'id',\n    title: 'ID',\n  },\n  {\n    id: 'product',\n    title: 'Product',\n  },\n  {\n    id: 'category',\n    title: 'Category',\n  },\n  {\n    id: 'user',\n    title: 'User',\n  },\n\n];\n\nconst SORT_ASC = 'asc';\nconst SORT_DESC = 'desc';\n\nexport const ProductList = ({ products }) => {\n  const [sortType, setSortType] = useState('');\n  const [sortOrder, setSortOrder] = useState('asc');\n\n  const sortedProducts = sortType === ''\n    ? [...products]\n    : [...products].sort((a, b) => {\n      let dif = 0;\n\n      switch (sortType) {\n        case 'id':\n          dif = a.id - b.id;\n          break;\n        case 'product':\n          dif = a.name.localeCompare(b.name);\n          break;\n        case 'category':\n          dif = a.category.title.localeCompare(b.category.title);\n          break;\n        case 'user':\n          dif = a.user.name.localeCompare(b.user.name);\n          break;\n        default:\n          dif = 0;\n      }\n\n      return sortOrder === SORT_ASC ? dif : -dif;\n    });\n\n  const handleSelectSort = (id) => {\n    if (sortType !== id) {\n      setSortType(id);\n      setSortOrder(SORT_ASC);\n    } else if (sortOrder === SORT_ASC) {\n      setSortOrder(SORT_DESC);\n    } else {\n      setSortType('');\n    }\n  };\n\n  return (\n    <table\n      data-cy=\"ProductTable\"\n      className=\"table is-striped is-narrow is-fullwidth\"\n    >\n      <thead>\n        <tr>\n          {columns.map(({ id, title }) => (\n            <th>\n              <span className=\"is-flex is-flex-wrap-nowrap\">\n                {title}\n\n                <a\n                  href=\"#/\"\n                  onClick={() => handleSelectSort(id)}\n                >\n                  <span className=\"icon\">\n                    <i\n                      data-cy=\"SortIcon\"\n                      className={classNames(\n                        'fas',\n                        {\n                          'fa-sort': id !== sortType,\n                          'fa-sort-down': id === sortType\n                            && sortOrder === SORT_DESC,\n                          'fa-sort-up': id === sortType\n                            && sortOrder === SORT_ASC,\n                        },\n                      )}\n                    />\n                  </span>\n                </a>\n              </span>\n            </th>\n          ))}\n        </tr>\n      </thead>\n\n      <tbody>\n        {sortedProducts.map(({\n          id,\n          name,\n          category,\n          user,\n        }) => (\n          <tr data-cy=\"Product\" key={id}>\n            <td className=\"has-text-weight-bold\" data-cy=\"ProductId\">\n              {id}\n            </td>\n\n            <td data-cy=\"ProductName\">{name}</td>\n            <td data-cy=\"ProductCategory\">{`${category.icon} - ${category.title}`}</td>\n\n            <td\n              data-cy=\"ProductUser\"\n              className={\n                user.sex === 'f'\n                  ? 'has-text-danger'\n                  : 'has-text-link'\n              }\n            >\n              {user.name}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import classNames from 'classnames';\nimport React from 'react';\n\nexport const UserFilter = ({ users, selectedUserId, setSelectedUserId }) => (\n  <p className=\"panel-tabs has-text-weight-bold\">\n    <a\n      data-cy=\"FilterAllUsers\"\n      href=\"#/\"\n      className={classNames({ 'is-active': selectedUserId === null })}\n      onClick={() => setSelectedUserId(null)}\n    >\n      All\n    </a>\n\n    {users.map(({ name, id }) => (\n      <a\n        key={id}\n        data-cy=\"FilterUser\"\n        href=\"#/\"\n        className={classNames({ 'is-active': selectedUserId === id })}\n        onClick={() => setSelectedUserId(id)}\n      >\n        {name}\n      </a>\n    ))}\n  </p>\n);\n","import React from 'react';\n\nexport const QueryFilter = ({ query, setQuery }) => {\n  const handleQueryChange = (event) => {\n    setQuery(event.target.value);\n  };\n\n  return (\n    <div className=\"panel-block\">\n      <p className=\"control has-icons-left has-icons-right\">\n        <input\n          data-cy=\"SearchField\"\n          type=\"text\"\n          className=\"input\"\n          placeholder=\"Search\"\n          value={query}\n          onChange={handleQueryChange}\n        />\n\n        <span className=\"icon is-left\">\n          <i className=\"fas fa-search\" aria-hidden=\"true\" />\n        </span>\n\n        {query !== '' && (\n          <span className=\"icon is-right\">\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <button\n              data-cy=\"ClearButton\"\n              type=\"button\"\n              className=\"delete\"\n              onClick={() => setQuery('')}\n            />\n          </span>\n        )}\n      </p>\n    </div>\n  );\n};\n","import classNames from 'classnames';\nimport React from 'react';\n\nexport const CategoryFilter = ({\n  categories,\n  selectedCategories,\n  setSelectedCategories,\n}) => {\n  const handleCategoryToggle = (id) => {\n    const index = selectedCategories.indexOf(id);\n\n    if (index >= 0) {\n      setSelectedCategories([\n        ...selectedCategories.slice(0, index),\n        ...selectedCategories.slice(index + 1, selectedCategories.length),\n      ]);\n    } else {\n      setSelectedCategories([\n        ...selectedCategories,\n        id,\n      ]);\n    }\n  };\n\n  return (\n    <div className=\"panel-block is-flex-wrap-wrap\">\n      <a\n        href=\"#/\"\n        data-cy=\"AllCategories\"\n        className={classNames('button is-success mr-6',\n          { 'is-outlined': selectedCategories.length !== 0 })\n        }\n        onClick={() => setSelectedCategories([])}\n      >\n        All\n      </a>\n      {categories.map(({ id, title }) => (\n        <a\n          key={id}\n          data-cy=\"Category\"\n          className={classNames(\n            'button mr-2 my-1',\n            { 'is-info': selectedCategories.includes(id) },\n          )}\n          href=\"#/\"\n          onClick={() => handleCategoryToggle(id)}\n        >\n          {title}\n        </a>\n      ))}\n    </div>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport './App.scss';\nimport usersFromServer from './api/users';\nimport categoriesFromServer from './api/categories';\nimport productsFromServer from './api/products';\nimport { ProductList } from './components/ProductList';\nimport { UserFilter } from './components/UserFilter';\nimport { QueryFilter } from './components/QueryFilter';\nimport { CategoryFilter } from './components/CategoryFilter';\n\nconst defaultProducts = productsFromServer.map((product) => {\n  const copy = { ...product };\n\n  copy.category = categoriesFromServer.find(\n    category => category.id === product.categoryId,\n  );\n  copy.user = usersFromServer.find(\n    user => user.id === copy.category.ownerId,\n  );\n\n  return copy;\n});\n\nexport const App = () => {\n  const [products] = useState(defaultProducts);\n  const [selectedUserId, setSelectedUserId] = useState(null);\n  const [selectedCategories, setSelectedCategories] = useState([]);\n  const [query, setQuery] = useState('');\n\n  const handleResetAll = () => {\n    setQuery('');\n    setSelectedUserId(null);\n    setSelectedCategories([]);\n  };\n\n  const filteredProducts = useMemo(\n    () => products.filter(\n      (product) => {\n        const userIdFilter = selectedUserId === null\n          || product.user.id === selectedUserId;\n        const selectedCategoriesFilter = selectedCategories.length === 0\n          || selectedCategories.includes(product.categoryId);\n\n        const cleanQuery = query.trim().toLowerCase();\n        const queryFilter = cleanQuery === ''\n          || product.name.toLowerCase().includes(cleanQuery);\n\n        return userIdFilter\n          && selectedCategoriesFilter\n          && queryFilter;\n      },\n    ),\n    [products, selectedUserId, query, selectedCategories],\n  );\n\n  return (\n    <div className=\"section\">\n      <div className=\"container\">\n        <h1 className=\"title\">Product Categories</h1>\n\n        <div className=\"block\">\n          <nav className=\"panel\">\n            <p className=\"panel-heading\">Filters</p>\n\n            <UserFilter\n              users={usersFromServer}\n              selectedUserId={selectedUserId}\n              setSelectedUserId={setSelectedUserId}\n            />\n\n            <QueryFilter query={query} setQuery={setQuery} />\n\n            <CategoryFilter\n              categories={categoriesFromServer}\n              selectedCategories={selectedCategories}\n              setSelectedCategories={setSelectedCategories}\n            />\n\n            <div className=\"panel-block\">\n              <a\n                data-cy=\"ResetAllButton\"\n                href=\"#/\"\n                className=\"button is-link is-outlined is-fullwidth\"\n                onClick={handleResetAll}\n              >\n                Reset all filters\n              </a>\n            </div>\n          </nav>\n        </div>\n\n        <div className=\"box table-container\">\n          {filteredProducts.length === 0\n            ? (\n              <p data-cy=\"NoMatchingMessage\">\n                No products matching selected criteria\n              </p>\n            )\n            : <ProductList products={filteredProducts} /> }\n\n        </div>\n      </div>\n    </div>\n  );\n};\n","export default [\n  {\n    id: 1,\n    name: 'Milk',\n    categoryId: 2,\n  },\n  {\n    id: 2,\n    name: 'Bread',\n    categoryId: 1,\n  },\n  {\n    id: 3,\n    name: 'Eggs',\n    categoryId: 1,\n  },\n  {\n    id: 4,\n    name: 'Jacket',\n    categoryId: 5,\n  },\n  {\n    id: 5,\n    name: 'Sugar',\n    categoryId: 1,\n  },\n  {\n    id: 6,\n    name: 'Banana',\n    categoryId: 3,\n  },\n  {\n    id: 7,\n    name: 'Beer',\n    categoryId: 2,\n  },\n  {\n    id: 8,\n    name: 'Socks',\n    categoryId: 5,\n  },\n  {\n    id: 9,\n    name: 'Apples',\n    categoryId: 3,\n  },\n];\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'bulma/css/bulma.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nimport { App } from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}